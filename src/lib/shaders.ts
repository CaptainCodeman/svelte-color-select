export const f_shader = `precision mediump float;uniform vec2 resolution;uniform float hue_rad;precision mediump float;
#define M_PI 3.1415926536
float cbrt(float x){return sign(x)*pow(abs(x),1./3.);}float srgb_transfer_function(float a){return.0031308>=a?12.92*a:1.055*pow(a,.416666666666667)-.055;}vec3 oklab_to_linear_srgb(vec3 c){float l_=c.x+.3963377774*c.y+.2158037573*c.z,m_=c.x-.1055613458*c.y-.0638541728*c.z,s_=c.x-.0894841775*c.y-1.291485548*c.z,l=l_*l_*l_,m=m_*m_*m_,s=s_*s_*s_;return vec3(4.0767416621*l-3.3077115913*m+.2309699292*s,-1.2684380046*l+2.6097574011*m-.3413193965*s,-.0041960863*l-.7034186147*m+1.707614701*s);}float compute_max_saturation(float a,float b){float k0,k1,k2,k3,k4,wl,wm,ws;ws=-1.88170328*a-.80936493*b>1.?(k0=1.19086277,k1=1.76576728,k2=.59662641,k3=.75515197,k4=.56771245,wl=4.0767416621,wm=-3.3077115913,.2309699292):1.81444104*a-1.19445276*b>1.?(k0=.73956515,k1=-.45954404,k2=.08285427,k3=.1254107,k4=.14503204,wl=-1.2684380046,wm=2.6097574011,-.3413193965):(k0=1.35733652,k1=-.00915799,k2=-1.1513021,k3=-.50559606,k4=.00692167,wl=-.0041960863,wm=-.7034186147,1.707614701);float S=k0+k1*a+k2*b+k3*a*a+k4*a*b,k_l=.3963377774*a+.2158037573*b,k_m=-.1055613458*a-.0638541728*b,k_s=-.0894841775*a-1.291485548*b;{float l_=1.+S*k_l,m_=1.+S*k_m,s_=1.+S*k_s,f=l_*l_*l_*wl+m_*m_*m_*wm+s_*s_*s_*ws,f1=3.*k_l*l_*l_*wl+3.*k_m*m_*m_*wm+3.*k_s*s_*s_*ws,f2=6.*k_l*k_l*l_*wl+6.*k_m*k_m*m_*wm+6.*k_s*k_s*s_*ws;S-=f*f1/(f1*f1-.5*f*f2);}return S;}vec2 find_cusp(float a,float b){float S_cusp=compute_max_saturation(a,b);vec3 rgb_at_max=oklab_to_linear_srgb(vec3(1,S_cusp*a,S_cusp*b));float L_cusp=cbrt(1./max(max(rgb_at_max.x,rgb_at_max.y),rgb_at_max.z));return vec2(L_cusp,L_cusp*S_cusp);}float toe_inv(float x){return(x*x+.206*x)/(1.206/1.03*(x+.03));}vec2 to_ST(vec2 cusp){float L=cusp.x,C=cusp.y;return vec2(C/L,C/(1.-L));}vec3 okhsv_to_srgb(vec3 hsv){float h=hsv.x,s=hsv.y,v=hsv.z,a_=cos(2.*M_PI*h),b_=sin(2.*M_PI*h);vec2 cusp=find_cusp(a_,b_),ST_max=to_ST(cusp);float T_max=ST_max.y,k=1.-.5/ST_max.x,L_v=1.-s*.5/(.5+T_max-T_max*k*s),C_v=s*T_max*.5/(.5+T_max-T_max*k*s),L=v*L_v,C=v*C_v,L_vt=toe_inv(L_v),C_vt=C_v*L_vt/L_v,L_new=toe_inv(L);C=C*L_new/L;L=L_new;vec3 rgb_scale=oklab_to_linear_srgb(vec3(L_vt,a_*C_vt,b_*C_vt));float scale_L=cbrt(1./max(max(rgb_scale.x,rgb_scale.y),max(rgb_scale.z,0.)));L*=scale_L;C*=scale_L;vec3 rgb=oklab_to_linear_srgb(vec3(L,C*a_,C*b_));return vec3(srgb_transfer_function(rgb.x),srgb_transfer_function(rgb.y),srgb_transfer_function(rgb.z));}void main(){vec2 uv=gl_FragCoord.xy/resolution;vec3 hsvRGB=okhsv_to_srgb(vec3(hue_rad,uv));gl_FragColor=vec4(hsvRGB,1);}`

export const v_shader = `attribute vec4 position;void main(){gl_Position=position;}`